<!DOCTYPE html>
<html>
<head>
  <title>SessionStorage Test</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
    .success { background-color: #d4edda; color: #155724; }
    .error { background-color: #f8d7da; color: #721c24; }
  </style>
</head>
<body>
  <h1>SessionStorage Test</h1>
  <div id="status"></div>
  <button id="setToken">Set Session Token</button>
  <button id="checkToken">Check Session Token</button>

  <script>
    function updateStatus(message, isSuccess) {
      const statusDiv = document.getElementById('status');
      statusDiv.className = 'status ' + (isSuccess ? 'success' : 'error');
      statusDiv.textContent = message;
    }

    document.getElementById('setToken').addEventListener('click', () => {
      sessionStorage.setItem('authToken', 'test-token-12345');
      sessionStorage.setItem('userId', 'user-999');
      localStorage.setItem('preferences', 'dark-mode');
      updateStatus('Session token and user ID set in sessionStorage', true);
    });

    document.getElementById('checkToken').addEventListener('click', () => {
      const token = sessionStorage.getItem('authToken');
      const userId = sessionStorage.getItem('userId');
      const prefs = localStorage.getItem('preferences');

      if (token && userId) {
        updateStatus(`✅ Token found: ${token}, User: ${userId}, Prefs: ${prefs}`, true);
      } else {
        updateStatus(`❌ Token not found. Token: ${token}, User: ${userId}, Prefs: ${prefs}`, false);
      }
    });

    // Auto-check on page load
    window.addEventListener('load', () => {
      const token = sessionStorage.getItem('authToken');
      if (token) {
        updateStatus(`Page loaded - Session token exists: ${token}`, true);
      } else {
        updateStatus('Page loaded - No session token found', false);
      }
    });
  </script>
</body>
</html>
