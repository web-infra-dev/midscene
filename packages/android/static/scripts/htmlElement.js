/*! For license information please see htmlElement.js.LICENSE.txt */
"use strict";var midscene_element_inspector=(()=>{var e=Object.create,t=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,h=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,c=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&d(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&d(e,n,t[n]);return e},f=(e,t)=>n(e,i(t)),u=(e,t)=>function(){return t||(0,e[o(e)[0]])((t={exports:{}}).exports,t),t.exports},p=(e,n,i,a)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let h of o(n))s.call(e,h)||h===i||t(e,h,{get:()=>n[h],enumerable:!(a=r(n,h))||a.enumerable});return e},m=u({"resolve-false:/empty-stub"(e,t){t.exports={}}}),b=u({"../../node_modules/.pnpm/js-sha256@0.11.0/node_modules/js-sha256/src/sha256.js"(e,t){!function(){var e="input is invalid type",n="object"==typeof window,r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&"object"==typeof self,o=!r.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;o?r=global:i&&(r=self);var a=!r.JS_SHA256_NO_COMMON_JS&&"object"==typeof t&&t.exports,h="function"==typeof define&&define.amd,s=!r.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,l="0123456789abcdef".split(""),d=[-0x80000000,8388608,32768,128],c=[24,16,8,0],f=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],u=["hex","array","digest","arrayBuffer"],p=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),s&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var b=function(e,t){return function(n){return new w(t,!0).update(n)[e]()}},y=function(e){var t=b("hex",e);o&&(t=g(t,e)),t.create=function(){return new w(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<u.length;++n){var r=u[n];t[r]=b(r,e)}return t},g=function(t,n){var i,o=m(),a=m().Buffer,h=n?"sha224":"sha256";return i=a.from&&!r.JS_SHA256_NO_BUFFER_FROM?a.from:function(e){return new a(e)},function(n){if("string"==typeof n)return o.createHash(h).update(n,"utf8").digest("hex");if(null==n)throw Error(e);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===a?o.createHash(h).update(i(n)).digest("hex"):t(n)}},x=function(e,t){return function(n,r){return new T(n,t,!0).update(r)[e]()}},N=function(e){var t=x("hex",e);t.create=function(t){return new T(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<u.length;++n){var r=u[n];t[r]=x(r,e)}return t};function w(e,t){t?(p[0]=p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0,this.blocks=p):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function T(t,n,r){var i,o=typeof t;if("string"===o){var a,h=[],l=t.length,d=0;for(i=0;i<l;++i)(a=t.charCodeAt(i))<128?h[d++]=a:(a<2048?h[d++]=192|a>>>6:(a<55296||a>=57344?h[d++]=224|a>>>12:(a=65536+((1023&a)<<10|1023&t.charCodeAt(++i)),h[d++]=240|a>>>18,h[d++]=128|a>>>12&63),h[d++]=128|a>>>6&63),h[d++]=128|63&a);t=h}else if("object"===o){if(null===t)throw Error(e);else if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!s||!ArrayBuffer.isView(t)))throw Error(e)}else throw Error(e);t.length>64&&(t=new w(n,!0).update(t).array());var c=[],f=[];for(i=0;i<64;++i){var u=t[i]||0;c[i]=92^u,f[i]=54^u}w.call(this,n,r),this.update(f),this.oKeyPad=c,this.inner=!0,this.sharedMemory=r}w.prototype.update=function(t){if(!this.finalized){var n,r=typeof t;if("string"!==r){if("object"===r){if(null===t)throw Error(e);else if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!s||!ArrayBuffer.isView(t)))throw Error(e)}else throw Error(e);n=!0}for(var i,o,a=0,h=t.length,l=this.blocks;a<h;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),n)for(o=this.start;a<h&&o<64;++a)l[o>>>2]|=t[a]<<c[3&o++];else for(o=this.start;a<h&&o<64;++a)(i=t.charCodeAt(a))<128?l[o>>>2]|=i<<c[3&o++]:(i<2048?l[o>>>2]|=(192|i>>>6)<<c[3&o++]:(i<55296||i>=57344?l[o>>>2]|=(224|i>>>12)<<c[3&o++]:(i=65536+((1023&i)<<10|1023&t.charCodeAt(++a)),l[o>>>2]|=(240|i>>>18)<<c[3&o++],l[o>>>2]|=(128|i>>>12&63)<<c[3&o++]),l[o>>>2]|=(128|i>>>6&63)<<c[3&o++]),l[o>>>2]|=(128|63&i)<<c[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=l[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=d[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},w.prototype.hash=function(){var e,t,n,r,i,o,a,h,s,l,d,c=this.h0,u=this.h1,p=this.h2,m=this.h3,b=this.h4,y=this.h5,g=this.h6,x=this.h7,N=this.blocks;for(e=16;e<64;++e)t=((i=N[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,n=((i=N[e-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,N[e]=N[e-16]+t+N[e-7]+n<<0;for(e=0,d=u&p;e<64;e+=4)this.first?(this.is224?(h=300032,x=(i=N[0]-0x543c9a5b)-0x8f1a6c7<<0,m=i+0x170e9b5<<0):(h=0x2a01a605,x=(i=N[0]-0xc881298)-0x5ab00ac6<<0,m=i+0x8909ae5<<0),this.first=!1):(t=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),n=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),r=(h=c&u)^c&p^d,i=x+n+(b&y^~b&g)+f[e]+N[e],o=t+r,x=m+i<<0,m=i+o<<0),t=(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10),n=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),r=(s=m&c)^m&u^h,i=g+n+(x&b^~x&y)+f[e+1]+N[e+1],o=t+r,g=p+i<<0,t=((p=i+o<<0)>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),r=(l=p&m)^p&c^s,i=y+n+(g&x^~g&b)+f[e+2]+N[e+2],o=t+r,y=u+i<<0,t=((u=i+o<<0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),n=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),r=(d=u&p)^u&m^l,i=b+n+(y&g^~y&x)+f[e+3]+N[e+3],o=t+r,b=c+i<<0,c=i+o<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+c<<0,this.h1=this.h1+u<<0,this.h2=this.h2+p<<0,this.h3=this.h3+m<<0,this.h4=this.h4+b<<0,this.h5=this.h5+y<<0,this.h6=this.h6+g<<0,this.h7=this.h7+x<<0},w.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,a=this.h6,h=this.h7,s=l[e>>>28&15]+l[e>>>24&15]+l[e>>>20&15]+l[e>>>16&15]+l[e>>>12&15]+l[e>>>8&15]+l[e>>>4&15]+l[15&e]+l[t>>>28&15]+l[t>>>24&15]+l[t>>>20&15]+l[t>>>16&15]+l[t>>>12&15]+l[t>>>8&15]+l[t>>>4&15]+l[15&t]+l[n>>>28&15]+l[n>>>24&15]+l[n>>>20&15]+l[n>>>16&15]+l[n>>>12&15]+l[n>>>8&15]+l[n>>>4&15]+l[15&n]+l[r>>>28&15]+l[r>>>24&15]+l[r>>>20&15]+l[r>>>16&15]+l[r>>>12&15]+l[r>>>8&15]+l[r>>>4&15]+l[15&r]+l[i>>>28&15]+l[i>>>24&15]+l[i>>>20&15]+l[i>>>16&15]+l[i>>>12&15]+l[i>>>8&15]+l[i>>>4&15]+l[15&i]+l[o>>>28&15]+l[o>>>24&15]+l[o>>>20&15]+l[o>>>16&15]+l[o>>>12&15]+l[o>>>8&15]+l[o>>>4&15]+l[15&o]+l[a>>>28&15]+l[a>>>24&15]+l[a>>>20&15]+l[a>>>16&15]+l[a>>>12&15]+l[a>>>8&15]+l[a>>>4&15]+l[15&a];return this.is224||(s+=l[h>>>28&15]+l[h>>>24&15]+l[h>>>20&15]+l[h>>>16&15]+l[h>>>12&15]+l[h>>>8&15]+l[h>>>4&15]+l[15&h]),s},w.prototype.toString=w.prototype.hex,w.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,a=this.h6,h=this.h7,s=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r,i>>>24&255,i>>>16&255,i>>>8&255,255&i,o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a];return this.is224||s.push(h>>>24&255,h>>>16&255,h>>>8&255,255&h),s},w.prototype.array=w.prototype.digest,w.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},T.prototype=new w,T.prototype.finalize=function(){if(w.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();w.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),w.prototype.finalize.call(this)}};var E=y();E.sha256=E,E.sha224=y(!0),E.sha256.hmac=N(),E.sha224.hmac=N(!0),a?t.exports=E:(r.sha256=E.sha256,r.sha224=E.sha224,h&&define(function(){return E}))}()}}),y={};function g(e,t=150){return void 0===e?"":("object"==typeof e&&(e=JSON.stringify(e)),"number"==typeof e)?e.toString():"string"==typeof e&&e.length>t?`${e.slice(0,t)}...`:"string"==typeof e?e.trim():""}function x(e,t,n=!1){let r=e=>Object.entries(e).map(([e,n])=>`${e}="${g(n,t)}"`).join(" ");return(function e(i,o=0){var a,h;let s="",l="",d="",c=!0,f="  ".repeat(o),u="";for(let t=0;t<(i.children||[]).length;t++){let n=e(i.children[t],o+1);n&&(u+=`
${n}`)}if(i.node&&i.node.rect.width>4&&i.node.rect.height>4&&(!n||n&&i.node.content)){let e;c=!1,e=(null==(a=i.node.attributes)?void 0:a.htmlTagName)?i.node.attributes.htmlTagName.replace(/[<>]/g,""):i.node.attributes.nodeType.replace(/\sNode$/,"").toLowerCase();let n=i.node.indexId,o=n?`markerId="${n}"`:"",u=i.node.rect?{left:i.node.rect.left,top:i.node.rect.top,width:i.node.rect.width,height:i.node.rect.height}:{};s=`<${e} id="${i.node.id}" ${o} ${r((h=i.node.attributes||{},Object.keys(h).reduce((e,n)=>{let r=h[n];return"style"===n||"src"===n||"htmlTagName"===n||"nodeType"===n||(e[n]=g(r,t)),e},{})))} ${r(u)}>`;let p=g(i.node.content,t);l=p?`
${f}  ${p}`:"",d=`</${e}>`}else!n&&(u.trim().startsWith("<>")||(s="<>",l="",d="</>"));if(c&&!u.trim())return"";let p=`${f}${s}${l}${u}
${f}${d}`;return p.trim()?p:""})(e).replace(/^\s*\n/gm,"")}function N(e){let t=[];return!function e(n){for(let r of(n.node&&t.push(n.node),n.children))e(r)}(e),t}function w(e,t){return!function e(n){for(let r of(n.node&&(n.node=t(n.node)),n.children))e(r)}(e),e}function T(e){return e instanceof Element&&(window.getComputedStyle(e).fontFamily||"").toLowerCase().indexOf("iconfont")>=0}function E(e){if(!(e instanceof HTMLElement))return!1;if(e.innerText)return!0;for(let t of["svg","button","input","textarea","select","option","img"])if(e.querySelectorAll(t).length>0)return!0;return!1}((e,n)=>{for(var r in n)t(e,r,{get:n[r],enumerable:!0})})(y,{clientExtractTextWithPosition:()=>R,descriptionOfTree:()=>x,traverseTree:()=>w,treeToList:()=>N,webExtractNodeTree:()=>U,webExtractNodeTreeAsString:()=>z,webExtractTextWithPosition:()=>k});var v=((n,r,i)=>(i=null!=n?e(h(n)):{},p(n&&n.__esModule?i:t(i,"default",{value:n,enumerable:!0}),n)))(b()),M={},A=!1;function O(...e){A&&console.log(...e)}var C="_midscene_retrieve_task_id";function _(e,t,n,r){if(!(e instanceof r.HTMLElement))return"";if(!C)return console.error("No task id found"),"";let i=`[${C}='${t}']`;return A&&(n?e.parentNode instanceof r.HTMLElement&&e.parentNode.setAttribute(C,t.toString()):e.setAttribute(C,t.toString())),i}function S(e,t){let n=Math.max(e.left,t.left),r=Math.max(e.top,t.top),i=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom);return n<i&&r<o?{left:n,top:r,right:i,bottom:o,width:i-n,height:o-r,x:n,y:r,zoom:1}:null}function H(e,t,n){let r,i=1;if(e instanceof n.HTMLElement)r=e.getBoundingClientRect(),"currentCSSZoom"in e||(i=Number.parseFloat(n.getComputedStyle(e).zoom)||1);else{let t=n.document.createRange();t.selectNodeContents(e),r=t.getBoundingClientRect()}let o=i*t;return{width:r.width*o,height:r.height*o,left:r.left*o,top:r.top*o,right:r.right*o,bottom:r.bottom*o,x:r.x*o,y:r.y*o,zoom:o}}var L=(e,t,n)=>{let r=t.left+t.width/2,i=t.top+t.height/2,o=n.document.elementFromPoint(r,i);return!(!o||o===e||(null==e?void 0:e.contains(o))||(null==o?void 0:o.contains(e)))&&!!S(t,H(o,1,n))&&(O(e,"Element is covered by another element",{topElement:o,el:e,rect:t,x:r,y:i}),!0)};function I(e,t){return e&&e instanceof t.HTMLElement&&e.attributes?Object.fromEntries(Array.from(e.attributes).map(e=>{if("class"===e.name)return[e.name,`.${e.value.split(" ").join(".")}`];if(!e.value)return[];let t=e.value;return t.startsWith("data:image")&&(t="image"),t.length>300&&(t=`${t.slice(0,300)}...`),[e.name,t]})):{}}function j(e,t,n){return function(e,t=""){let n=JSON.stringify({content:t,rect:e}),r=5,i="",o=v.sha256.create().update(n).hex().split("").map(e=>String.fromCharCode(97+Number.parseInt(e,16)%26)).join("");for(;r<o.length-1;){if(M[i=o.slice(0,r)]&&M[i]!==n){r++;continue}M[i]=n;break}return i}(n,t)}var B=0;function $(e){let t="";e instanceof HTMLElement&&(t=e.tagName.toLowerCase());let n=e.parentElement;return n&&n instanceof HTMLElement&&(t=n.tagName.toLowerCase()),t?`<${t}>`:""}function W(e,t,n,r=1,i={left:0,top:0}){var o;let a=function(e,t,n,r=1){if(!e||!(e instanceof t.HTMLElement)&&e.nodeType!==Node.TEXT_NODE&&"svg"!==e.nodeName.toLowerCase())return O(e,"Element is not in the DOM hierarchy"),!1;if(e instanceof t.HTMLElement){let n=t.getComputedStyle(e);if("none"===n.display||"hidden"===n.visibility||"0"===n.opacity&&"INPUT"!==e.tagName)return O(e,"Element is hidden"),!1}let i=H(e,r,t);if(0===i.width&&0===i.height)return O(e,"Element has no size"),!1;if(1===r&&L(e,i,t))return!1;let o=t.pageXOffset||n.documentElement.scrollLeft,a=t.pageYOffset||n.documentElement.scrollTop,h=t.innerWidth||n.documentElement.clientWidth,s=t.innerHeight||n.documentElement.clientHeight;if(!function(e,t,n){let r=e.height,i=e.width,o=S(e,{left:0,top:0,width:t.innerWidth||n.documentElement.clientWidth,height:t.innerHeight||n.documentElement.clientHeight,right:t.innerWidth||n.documentElement.clientWidth,bottom:t.innerHeight||n.documentElement.clientHeight,x:0,y:0,zoom:1});return!!o&&o.width*o.height/(r*i)>=2/3}(i,t,n))return O(e,"Element is completely outside the viewport",{rect:i,viewportHeight:s,viewportWidth:h,scrollTop:a,scrollLeft:o}),!1;let l=e,d=e=>{let n=null==e?void 0:e.parentElement;for(;n;){if("static"!==t.getComputedStyle(n).position)return n;n=n.parentElement}return null};for(;l&&l!==n.body;){if(!(l instanceof t.HTMLElement)){l=l.parentElement;continue}let n=t.getComputedStyle(l);if("hidden"===n.overflow){let n=H(l,1,t);if(i.right<n.left-10||i.left>n.right+10||i.bottom<n.top-10||i.top>n.bottom+10)return O(e,"element is partially or totally hidden by an ancestor",{rect:i,parentRect:n}),!1}if("fixed"===n.position||"sticky"===n.position)break;l="absolute"===n.position?d(l):l.parentElement}return{left:Math.round(i.left),top:Math.round(i.top),width:Math.round(i.width),height:Math.round(i.height),zoom:i.zoom}}(e,t,n,r);if(!a||a.width<3||a.height<3||((0!==i.left||0!==i.top)&&(a.left+=i.left,a.top+=i.top),a.height>=window.innerHeight&&a.width>=window.innerWidth))return null;if(e instanceof HTMLElement&&("input"===e.tagName.toLowerCase()||"textarea"===e.tagName.toLowerCase()||"select"===e.tagName.toLowerCase()||"option"===e.tagName.toLowerCase())){let n=I(e,t),r=n.value||n.placeholder||e.textContent||"",i=j(e,r,a),o=_(e,i,!1,t),h=e.tagName.toLowerCase();return"select"===e.tagName.toLowerCase()&&(r=e.options[e.selectedIndex].textContent||""),("input"===e.tagName.toLowerCase()||"textarea"===e.tagName.toLowerCase())&&e.value&&(r=e.value),{id:i,nodeHashId:i,locator:o,nodeType:"FORM_ITEM Node",indexId:B++,attributes:f(c({},n),{htmlTagName:`<${h}>`,nodeType:"FORM_ITEM Node"}),content:r.trim(),rect:a,center:[Math.round(a.left+a.width/2),Math.round(a.top+a.height/2)],zoom:a.zoom,screenWidth:t.innerWidth,screenHeight:t.innerHeight}}if(e instanceof HTMLElement&&"button"===e.tagName.toLowerCase()){let n=I(e,t),r=function(e,t){if(!(e instanceof t.HTMLElement))return{before:"",after:""};let n=t.getComputedStyle(e,"::before").getPropertyValue("content"),r=t.getComputedStyle(e,"::after").getPropertyValue("content");return{before:"none"===n?"":n.replace(/"/g,""),after:"none"===r?"":r.replace(/"/g,"")}}(e,t),i=e.innerText||r.before||r.after||"",o=j(e,i,a),h=_(e,o,!1,t);return{id:o,indexId:B++,nodeHashId:o,nodeType:"BUTTON Node",locator:h,attributes:f(c({},n),{htmlTagName:$(e),nodeType:"BUTTON Node"}),content:i,rect:a,center:[Math.round(a.left+a.width/2),Math.round(a.top+a.height/2)],zoom:a.zoom,screenWidth:t.innerWidth,screenHeight:t.innerHeight}}if(!E(e)&&e instanceof Element&&"none"!==window.getComputedStyle(e).getPropertyValue("background-image")||T(e)||e instanceof HTMLElement&&"img"===e.tagName.toLowerCase()||e instanceof SVGElement&&"svg"===e.tagName.toLowerCase()){let n=I(e,t),r=j(e,"",a),i=_(e,r,!1,t);return{id:r,indexId:B++,nodeHashId:r,locator:i,attributes:f(c(c({},n),"svg"===e.nodeName.toLowerCase()?{svgContent:"true"}:{}),{nodeType:"IMG Node",htmlTagName:$(e)}),nodeType:"IMG Node",content:"",rect:a,center:[Math.round(a.left+a.width/2),Math.round(a.top+a.height/2)],zoom:a.zoom,screenWidth:t.innerWidth,screenHeight:t.innerHeight}}if("#text"===e.nodeName.toLowerCase()&&!T(e)){let n=null==(o=e.textContent)?void 0:o.trim().replace(/\n+/g," ");if(!n)return null;let r=I(e,t),i=Object.keys(r);if(!n.trim()&&0===i.length)return null;let h=j(e,n,a),s=_(e,h,!0,t);return{id:h,indexId:B++,nodeHashId:h,nodeType:"TEXT Node",locator:s,attributes:f(c({},r),{nodeType:"TEXT Node",htmlTagName:$(e)}),center:[Math.round(a.left+a.width/2),Math.round(a.top+a.height/2)],content:n,rect:a,zoom:a.zoom,screenWidth:t.innerWidth,screenHeight:t.innerHeight}}if(!(!(e instanceof HTMLElement)||E(e))&&window.getComputedStyle(e).getPropertyValue("background-color")){let n=I(e,t),r=j(e,"",a),i=_(e,r,!1,t);return{id:r,nodeHashId:r,indexId:B++,nodeType:"CONTAINER Node",locator:i,attributes:f(c({},n),{nodeType:"CONTAINER Node",htmlTagName:$(e)}),content:"",rect:a,center:[Math.round(a.left+a.width/2),Math.round(a.top+a.height/2)],zoom:a.zoom,screenWidth:t.innerWidth,screenHeight:t.innerHeight}}return null}function k(e,t=!1){let n=U(e,t),r=[];return!function e(t){t.node&&r.push(t.node);for(let n=0;n<t.children.length;n++)e(t.children[n])}({children:n.children,node:n.node}),r}function z(e,t=!1){return x(U(e,t))}function U(e,t=!1){A=t,B=0;let n=document.body||document,r=e||n,i=[];function o(e,t,n,r=1,i={left:0,top:0}){if(!e||e.nodeType&&10===e.nodeType)return null;let a=W(e,t,n,r,i);if(e instanceof t.HTMLIFrameElement&&e.contentWindow&&e.contentWindow)return null;let h={node:a,children:[]};if((null==a?void 0:a.nodeType)==="BUTTON Node"||(null==a?void 0:a.nodeType)==="IMG Node"||(null==a?void 0:a.nodeType)==="TEXT Node"||(null==a?void 0:a.nodeType)==="FORM_ITEM Node"||(null==a?void 0:a.nodeType)==="CONTAINER Node")return h;let s=H(e,r,t);for(let r=0;r<e.childNodes.length;r++){O("will dfs",e.childNodes[r]);let a=o(e.childNodes[r],t,n,s.zoom,i);a&&h.children.push(a)}return h}let a=o(r,window,document,1,{left:0,top:0});if(a&&i.push(a),r===n){let e=document.querySelectorAll("iframe");for(let t=0;t<e.length;t++){let n=e[t];if(n.contentDocument&&n.contentWindow){let e=W(n,window,document,1);if(e){let t=o(n.contentDocument.body,n.contentWindow,n.contentDocument,1,{left:e.rect.left,top:e.rect.top});t&&i.push(t)}}}}return{node:null,children:i}}function R(e){let t=[],n=1;return!function e(r,i=null){if(!r)return;let o={node:r,children:[]};if(i&&i.children.push(o),function(e){var r;let i,o=function(e){var t;let n={};if(e&&1===e.nodeType)for(let r=0;r<e.attributes.length;r++){let i=e.attributes[r];n[i.nodeName]=null!=(t=i.nodeValue)?t:""}return n}(e),a=function(e){var t,n,r,i;let o=Math.round(Number.parseFloat(null!=(t=e.x)?t:"0")),a=Math.round(Number.parseFloat(null!=(n=e.y)?n:"0"));return{left:Math.max(0,Math.floor(o)),top:Math.max(0,Math.floor(a)),width:Math.max(0,Math.round(Number.parseFloat(null!=(r=e.width)?r:"0"))),height:Math.max(0,Math.round(Number.parseFloat(null!=(i=e.height)?i:"0")))}}(o),h=j(null,o.placeholder,a),s=3===e.nodeType&&(null==(r=e.nodeValue)?void 0:r.trim())||"";switch(e.nodeName.toUpperCase()){case"TEXT":i="TEXT Node";break;case"IMAGE":i="IMG Node";break;case"BUTTON":i="BUTTON Node";break;case"SEARCHINPUT":case"TEXTINPUT":case"INPUT":i="FORM_ITEM Node";break;case"NAV":case"LIST":case"CELL":i="CONTAINER Node";break;default:i="android:id/input"===o.id||"android:id/inputArea"===o.id?"FORM_ITEM Node":"CONTAINER Node"}let l=function(e){if(1!==e.nodeType)return"";let t=(e,t)=>{let n=1;for(let r=e.previousSibling;r;r=r.previousSibling)1===r.nodeType&&r.nodeName===t&&n++;return n},n=e=>{for(let t of["id","resource-id","content-desc","class"])if(e.hasAttribute(t)){let n=e.getAttribute(t);if(n&&""!==n.trim())return`[@${t}="${n}"]`}return""},r=(e,i="")=>{if(e.parentNode&&(i=r(e.parentNode,i)),1===e.nodeType){let r=e.nodeName.toLowerCase(),o=`/${r}`,a=n(e);if(a)o+=a;else{let n=t(e,e.nodeName);n>1&&(o+=`[${n}]`)}i+=o}return i};return r(e)}(e),d={id:h,indexId:n++,nodeHashId:h,locator:l,attributes:c({nodeType:i},o),content:s,rect:a,center:[Math.round(a.left+a.width/2),Math.round(a.top+a.height/2)],nodeType:i};"CONTAINER Node"!==d.nodeType&&t.push(d)}(r),r.childNodes&&r.childNodes.length>0)for(let t=0;t<r.childNodes.length;t++)e(r.childNodes[t],o)}(e,{node:e,children:[]}),t}return p(t({},"__esModule",{value:!0}),y)})();